# Проект №3 "REST API"
Это один из проектов в рамках курса "Spring - Полный курс" от команды SwiftBook 
([ссылка на курс](https://swiftbook.org/courses/438/show_promo)).

В проекте реализован REST API сервис, который обрабатывает запросы от метеорологического датчика.
Подробное техническое задание в файле [TZ.md](TZ.md).

В качестве базы данных используется PostgreSQL (в программе используется локальное подключение).

### Описание реализации

#### В качестве "модели" выступают две сущности
 * `Sensor` - сам датчик;
 * `Measurement` - показание от датчика;

БД имеет одноименные таблицы.

`Sensor` имеет дополнительное вспомогательное поле `createdAT` для хранения даты и времени регистрации сенсора. 

Класс `Measurement` имеет дополнительное поле `Sensor owner` для выполнения отношения "ManyToOne" между таблицами; в самой таблице `Measurement` столбец `sensor_id` выступает в роле внешнего ключа.

#### В проекте используется так называемый "DTO" - `SensorDTO` и `MeasurementDTO` - т.е. объекты, которые используются при запросах и ответах.

#### Для взаимодействия с сущностями БД используется обычный "JpaRepository" - это интерфейсы `SensorsRepository` и `MeasurementRepository`.  

В интерфейсе `SensorsRepository` обозначен метод `findByName()` для поиска сенсора по имени. А в интерфейсе `MeasurementRepository` - метод `findByRainingTrue()` для поиска "дождливых" показаний.

#### Слой "сервиса" представлен классами `SensorsService` и `MeasurementsService`.

#### "Контроллеры" -  классы `SensorsController` и `MeasurementsController`.

#### Вспомогательные классы в пакете `util` предназначены для обработки возможных ошибок в запросах сенсора: 

 * `ErrorResponse` - используется для формирования объекта сообщения ошибки;
 * `ErrorMsgUtil` - для обработки ошибок при валидации полей запроса;
 * `MeasurementNotAddedException` - кастомное исключение при невозможности записи показания;
 * `SensorNotCreatedException` - кастомное исключение при ошибке регистрации сенсора;

